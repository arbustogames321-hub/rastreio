<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#ff5a3a">
  <title>Painel de Pedidos ‚Äî Mobile</title>
  <style>
    /* === Estilos MOBILE-FIRST (telas pequenas primeiro) === */
    :root{
      --bg:#ffffff; --text:#111827; --muted:#6b7280;
      --brand:#ff5a3a; --tab:#999; --line:#e5e7eb; --card:#fff; --ok:#10b981;
      --space: clamp(12px, 3.5vw, 18px);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .wrap{max-width: 560px; margin:0 auto; padding-bottom: 24px}
    .tabs{
      position: sticky; top: 0; z-index: 5; background: var(--bg);
      display:flex; gap: 18px; overflow-x:auto; padding: 12px var(--space) 6px;
      border-bottom: 1px solid var(--line);
    }
    .tab{
      flex: 0 0 auto; font-weight: 700; font-size: clamp(14px, 4vw, 18px);
      color: var(--tab); text-decoration:none; padding: 6px 2px; border-bottom: 3px solid transparent;
    }
    .tab.active{ color: var(--brand); border-color: var(--brand) }
    .page{ padding: 12px var(--space) }
    .empty{
      display:grid; place-items:center; text-align:center; padding: 42px 12px; color: var(--muted);
    }
    .empty .icon{ font-size: 56px; line-height: 1}
    .card{
      background: var(--card); border:1px solid var(--line); border-radius: 14px; padding: 14px;
      box-shadow: 0 8px 20px rgba(0,0,0,.04);
    }
    .row{ display:flex; gap: 10px; align-items:center; }
    .row+.row{ margin-top: 10px }
    .k{ color: var(--muted); font-size: 13px }
    .v{ font-weight: 700 }
    .badge{ display:inline-block; padding: 4px 10px; border-radius: 999px; border:1px solid var(--line); font-weight: 700; font-size: 13px }
    .pill-ok{ background:#ecfdf5; color:#065f46; border-color:#a7f3d0 }
    .obs{ margin-top: 10px; border:1px dashed var(--line); padding: 10px; border-radius:10px; color:#374151; background:#fafafa }
    .actions{ display:flex; gap: 10px; margin-top: 14px; flex-wrap: wrap }
    button, .btn{
      appearance:none; border:1px solid var(--line); background:#f9fafb; font-weight:700;
      padding: 10px 14px; border-radius: 12px; font-size: 15px; cursor:pointer; text-decoration:none; color:inherit;
      min-height:44px; /* √°rea de toque confort√°vel */
    }
    button:active, .btn:active{ transform: scale(.98) }
    .muted{ color: var(--muted) }
    .footer{ margin-top: 16px; color: var(--muted); font-size: 12px; text-align:center }
    /* telas maiores apenas refinam espa√ßos */
    @media (min-width: 620px){ .wrap{padding-top:6px} }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Abas tipo o exemplo da imagem -->
    <nav class="tabs" id="tabs" role="tablist" aria-label="Status do pedido">
      <!-- Os links s√£o preenchidos via JS para manter os par√¢metros -->
      <a class="tab" role="tab" id="t0">A Pagar</a>
      <a class="tab" role="tab" id="t1">Preparando</a>
      <a class="tab" role="tab" id="t2">A caminho</a>
      <a class="tab" role="tab" id="t3">Reembolso</a>
    </nav>

    <main class="page">
      <section id="conteudo"></section>
      <div class="footer">Painel est√°tico, pronto para celular. Compartilhe o link; para atualizar, gere outro link alterando os par√¢metros.</div>
    </main>
  </div>

<script>
(function(){
  // 0=A Pagar | 1=Preparando | 2=A caminho | 3=Reembolso
  const STATUS = ["A Pagar","Preparando","A caminho","Reembolso"];

  const qs = new URLSearchParams(location.search);
  const get = (k, d="") => qs.get(k) ?? d;

  const pedido = get("p","");            // n√∫mero do pedido
  const s      = parseInt(get("s","0"),10); // status 0..3
  const obs    = get("o","");            // observa√ß√£o
  const t      = get("t","").replace("T"," "); // √∫ltima atualiza√ß√£o
  const nome   = get("n","");            // nome do destinat√°rio (opcional)

  const active = isFinite(s) ? Math.max(0, Math.min(3, s)) : 0;

  // Configura abas mantendo os par√¢metros do link
  const buildUrl = (novoS) => {
    const u = new URL(location.href);
    const sp = u.searchParams;
    sp.set("s", novoS);
    return u.toString();
  };
  document.querySelectorAll(".tab").forEach((el, i) => {
    el.href = buildUrl(i);
    if(i===active){ el.classList.add("active"); el.setAttribute("aria-selected","true"); }
    else { el.setAttribute("aria-selected","false"); }
  });

  // Monta conte√∫do
  const area = document.getElementById("conteudo");

  if(!pedido){
    // Sem pedido -> estado vazio como no print
    area.innerHTML = `
      <div class="empty" role="status" aria-live="polite">
        <div class="icon" aria-hidden="true">üóíÔ∏è</div>
        <div style="margin-top:12px">
          <div class="muted" style="font-weight:700; font-size:16px">Ainda n√£o Existem Pedidos</div>
          <div class="muted" style="margin-top:6px; font-size:13px">Envie um link com os par√¢metros do pedido para aparecer aqui.</div>
        </div>
      </div>
      <div class="card" style="margin-top:6px">
        <div class="k">Como usar rapidamente</div>
        <div style="margin-top:8px; font-size:14px">
          Abra este arquivo com <strong>?p=123&s=2&o=Chega%20amanh%C3%A3&t=2025-10-15%2014:00</strong> no fim da URL.<br>
          Par√¢metros: p=pedido ¬∑ s=status(0..3) ¬∑ o=observa√ß√£o ¬∑ t=AAAA-MM-DD HH:MM ¬∑ n=nome
        </div>
      </div>
    `;
    return;
  }

  // Com pedido -> mostra cart√£o resumido
  const statusAtual = STATUS[active];
  const hora = t || new Date().toISOString().slice(0,16).replace("T"," ");
  const nomeLinha = nome ? `<div class="row"><div class="k">Cliente</div><div class="v">${nome}</div></div>` : "";

  area.innerHTML = `
    <div class="card" role="article" aria-label="Resumo do pedido">
      <div class="row">
        <div class="k">Pedido</div>
        <div class="v">#${pedido}</div>
        <span class="badge" style="margin-left:auto">${statusAtual}</span>
      </div>
      ${nomeLinha}
      <div class="row"><div class="k">Atualizado</div><div class="v">${hora}</div></div>
      <div class="obs" ${obs ? "" : 'style="display:none"'}>${obs || ""}</div>
      <div class="actions">
        <button id="share">Compartilhar link</button>
        <button id="copy">Copiar link</button>
        <a class="btn" id="whats" target="_blank" rel="noopener">Enviar no WhatsApp</a>
      </div>
    </div>
  `;

  // Compartilhar (Web Share API no celular) + WhatsApp fallback
  const urlAtual = location.href;
  const shareText = `Rastreio do Pedido #${pedido} ‚Äî ${statusAtual}${obs ? " ¬∑ " + obs : ""} (${hora})\n${urlAtual}`;

  document.getElementById("whats").href =
    `https://wa.me/?text=${encodeURIComponent(shareText)}`;

  document.getElementById("copy").addEventListener("click", async ()=>{
    try{ await navigator.clipboard.writeText(urlAtual); alert("Link copiado!"); }
    catch(e){ prompt("Copie o link:", urlAtual); }
  });

  document.getElementById("share").addEventListener("click", async ()=>{
    if(navigator.share){
      try{ await navigator.share({title:`Pedido #${pedido}`, text: shareText, url: urlAtual}); }catch(e){}
    }else{
      // Se n√£o tiver API de compartilhamento, copia
      try{ await navigator.clipboard.writeText(urlAtual); alert("Link copiado!"); }
      catch(e){ prompt("Copie o link:", urlAtual); }
    }
  });
})();
</script>
</body>
</html>

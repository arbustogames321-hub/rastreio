<!doctype html>
<html lang="pt-br">
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Rastreio</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#fafafa;color:#222}
  main{max-width:520px;margin:10vh auto;padding:24px;background:#fff;border:1px solid #eee;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,.04)}
  h1{margin:0 0 12px;font-size:22px}
  label{display:block;margin:8px 0 6px}
  input{width:100%;padding:12px 14px;font-size:16px;border:1px solid #ccc;border-radius:10px}
  button{margin-top:12px;padding:12px 16px;font-size:16px;border:0;border-radius:10px;cursor:pointer}
  #out{margin-top:10px;font-size:.95em;word-break:break-all;opacity:.8}
</style>
<script>
(function(){
  function destino(codigo){
    // Mude só esta linha se quiser outro serviço:
    return 'https://www.siterastreio.com.br/' + encodeURIComponent(codigo);
    // ou: return 'https://www.linkcorreios.com.br/?id=' + encodeURIComponent(codigo);
  }
  function gerar(c){
    c=(c||'').trim().toUpperCase();
    if(!/^[A-Z0-9]{8,30}$/.test(c)) return null; // valida simples
    return destino(c);
  }
  function abrir(u){ if(u) location.replace(u); }
  function copiar(u){
    try{ navigator.clipboard.writeText(u).then(()=>alert('Link copiado:\n'+u),()=>prompt('Copie o link:',u)); }
    catch(e){ prompt('Copie o link:',u); }
  }
  // pega ?c= ou o último pedaço da URL (/CODIGO)
  const p=location.pathname.replace(/\/+/g,'/').replace(/^\/|\/$/g,'');
  const seg=p && !/index\.html?$/i.test(p) ? p.split('/').pop() : '';
  const q=new URL(location.href).searchParams.get('c')||'';
  const pronto=gerar(q||seg||'');
  if(pronto){ abrir(pronto); return; }
  document.addEventListener('DOMContentLoaded',()=>{
    const i=document.getElementById('code'), go=document.getElementById('go'), cp=document.getElementById('copy'), out=document.getElementById('out');
    function prev(){ const u=gerar(i.value); out.textContent=u?u:''; }
    i.addEventListener('input',prev);
    go.onclick=(e)=>{e.preventDefault(); const u=gerar(i.value); if(!u) return alert('Código inválido. Ex.: AA123456789BR'); abrir(u);};
    cp.onclick=(e)=>{e.preventDefault(); const u=gerar(i.value); if(!u) return alert('Código inválido.'); copiar(u);};
    i.focus();
  });
})();
</script>
<body>
  <main>
    <h1>Rastreio</h1>
    <form autocomplete="off">
      <label for="code">Cole o código de rastreio</label>
      <input id="code" placeholder="AA123456789BR" maxlength="30">
      <button id="go">Abrir rastreio</button>
      <button id="copy" type="button">Copiar link</button>
      <div id="out"></div>
      <p style="opacity:.7">Dica: também funciona <code>/SEU_CODIGO</code> e <code>?c=SEU_CODIGO</code>.</p>
    </form>
  </main>
</body>
</html>
